<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/vote - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/vote.html#var">Var Details</a> - <a href="datum/controller/subsystem/vote.html#proc">Proc Details</a></header><main><h1>vote <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/vote.html">vote</a></aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L4"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 4"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/current_vote">current_vote</a></th><td>The vote we're currently voting on.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/generated_actions">generated_actions</a></th><td>A list of all generated action buttons</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/last_vote_time">last_vote_time</a></th><td>World.time we started our last vote</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/possible_votes">possible_votes</a></th><td>All votes that we can possible vote for.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/voted">voted</a></th><td>A list of all ckeys who have voted for the current vote.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#var/voting">voting</a></th><td>A list of all ckeys currently voting for the current vote.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/can_vote_start">can_vote_start</a></th><td>Checks if we can start a vote.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/end_vote">end_vote</a></th><td>Ends the current vote.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/fire">fire</a></th><td>Bubber vote fire proc, original at code/controllers/subsystem/vote.dm</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/initiate_vote">initiate_vote</a></th><td>Initiates a vote, allowing all players to vote on something.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/process_vote_result">process_vote_result</a></th><td>Process the results of the vote.
Collects all the winners, breaks any ties that occur,
prints the results of the vote to the world,
and finally follows through with the effects of the vote.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/reset">reset</a></th><td>Resets all of our vars after votes conclude / are cancelled.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/submit_multi_vote">submit_multi_vote</a></th><td>Any number of selections per person, and the selection with the most votes wins.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/submit_ranked_vote">submit_ranked_vote</a></th><td>Ranked choice voting, where voters rank options in order of preference.
If an option doesn't reach the threshold, lowest votes are transferred to next preferences.</td></tr><tr><th><a href="datum/controller/subsystem/vote.html#proc/submit_single_vote">submit_single_vote</a></th><td>One selection per person, and the selection with the most votes wins.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/current_vote"><aside class="declaration">var </aside>current_vote <aside>– /<a href="datum.html">datum</a>/<a href="datum/vote.html">vote</a></aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 15"></a></h3><p>The vote we're currently voting on.</p><h3 id="var/generated_actions"><aside class="declaration">var </aside>generated_actions <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/action.html">action</a></aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 11"></a></h3><p>A list of all generated action buttons</p><h3 id="var/last_vote_time"><aside class="declaration">var </aside>last_vote_time <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L21"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 21"></a></h3><p>World.time we started our last vote</p><h3 id="var/possible_votes"><aside class="declaration">var </aside>possible_votes <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/vote.html">vote</a></aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 13"></a></h3><p>All votes that we can possible vote for.</p><h3 id="var/voted"><aside class="declaration">var </aside>voted <aside>– /list</aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 17"></a></h3><p>A list of all ckeys who have voted for the current vote.</p><h3 id="var/voting"><aside class="declaration">var </aside>voting <aside>– /list</aside> <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 19"></a></h3><p>A list of all ckeys currently voting for the current vote.</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_vote_start"><aside class="declaration">proc </aside>can_vote_start<aside>(/<a href="mob.html">mob</a>/vote_initiator, forced)  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L264"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 264"></a></aside></h3><p>Checks if we can start a vote.</p>
<ul>
<li>vote_initiator - The mob that initiated the vote.</li>
<li>forced - Whether we're forcing the vote to go through regardless of existing votes or other circumstances.</li>
</ul>
<p>Returns TRUE if we can start a vote, FALSE if we can't.</p><h3 id="proc/end_vote"><aside class="declaration">proc </aside>end_vote<aside>()  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L43"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 43"></a></aside></h3><p>Ends the current vote.</p><h3 id="proc/fire"><aside class="parent"><a title="/datum/controller/subsystem" href="datum/controller/subsystem.html#proc/fire">↑</a></aside>fire<aside>()  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/modular_zubbers/code/controllers/subsystem/vote.dm#L14"><img src="git.png" width="16" height="16" title="modular_zubbers/code/controllers/subsystem/vote.dm 14"></a></aside></h3><p>Bubber vote fire proc, original at code/controllers/subsystem/vote.dm</p><h3 id="proc/initiate_vote"><aside class="declaration">proc </aside>initiate_vote<aside>(vote_type, vote_initiator_name, /<a href="mob.html">mob</a>/vote_initiator, forced)  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L189"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 189"></a></aside></h3><p>Initiates a vote, allowing all players to vote on something.</p>
<ul>
<li>vote_type - The type of vote to initiate. Can be a <a href="datum/vote.html" title="/datum/vote">/datum/vote</a> typepath, a <a href="datum/vote.html" title="/datum/vote">/datum/vote</a> instance, or the name of a vote datum.</li>
<li>vote_initiator_name - The ckey (if player initiated) or name that initiated a vote. Ex: &quot;UristMcAdmin&quot;, &quot;the server&quot;</li>
<li>vote_initiator - If a person / mob initiated the vote, this is the mob that did it</li>
<li>forced - Whether we're forcing the vote to go through regardless of existing votes or other circumstances.</li>
</ul><h3 id="proc/process_vote_result"><aside class="declaration">proc </aside>process_vote_result<aside>()  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L67"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 67"></a></aside></h3><p>Process the results of the vote.
Collects all the winners, breaks any ties that occur,
prints the results of the vote to the world,
and finally follows through with the effects of the vote.</p><h3 id="proc/reset"><aside class="declaration">proc </aside>reset<aside>()  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L50"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 50"></a></aside></h3><p>Resets all of our vars after votes conclude / are cancelled.</p><h3 id="proc/submit_multi_vote"><aside class="declaration">proc </aside>submit_multi_vote<aside>(/<a href="mob.html">mob</a>/voter, their_vote)  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L157"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 157"></a></aside></h3><p>Any number of selections per person, and the selection with the most votes wins.</p><h3 id="proc/submit_ranked_vote"><aside class="declaration">proc </aside>submit_ranked_vote<aside>(/<a href="mob.html">mob</a>/voter, their_vote, rank)  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/modular_zubbers/code/controllers/subsystem/vote.dm#L45"><img src="git.png" width="16" height="16" title="modular_zubbers/code/controllers/subsystem/vote.dm 45"></a></aside></h3><p>Ranked choice voting, where voters rank options in order of preference.
If an option doesn't reach the threshold, lowest votes are transferred to next preferences.</p><h3 id="proc/submit_single_vote"><aside class="declaration">proc </aside>submit_single_vote<aside>(/<a href="mob.html">mob</a>/voter, their_vote)  <a href="https://github.com/Bubberstation/Bubberstation/blob/6f9534245f6171fa0aa17ea887605397ec3e9719/code/controllers/subsystem/vote.dm#L129"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/vote.dm 129"></a></aside></h3><p>One selection per person, and the selection with the most votes wins.</p></main><footer>tgstation.dme <a href="https://github.com/Bubberstation/Bubberstation/tree/6f9534245f6171fa0aa17ea887605397ec3e9719">6f95342</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>